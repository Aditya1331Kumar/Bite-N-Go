<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tiffin Service - Landing</title>
  <link rel="stylesheet" href="Styles/index.css" />
  <link rel="stylesheet" href="Styles/login.css" />
  <link rel="stylesheet" href="Styles/sigin.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
  <style>
    /* Modal overlay */
    .modal {
      display: none; 
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.5);
    }
    /* Modal content box */
    .modal-content {
      position: relative;
      margin: 5% auto;
      width: 450px;
    }
    .close-btn {
      position: absolute;
      top: -10px;
      right: -10px;
      background: red;
      color: white;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      font-weight: bold;
      text-align: center;
      line-height: 25px;
      cursor: pointer;
      z-index: 1001;
    }
  </style>

  <!-- Google Identity Services library -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

  <!-- Navbar -->
    <header class="header">
    <div class="container nav-wrap">
      <div class="brand">
        <div class="logo-mark" aria-hidden="true">
          <!-- small svg mark -->
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="7" width="20" height="12" rx="2" fill="#27ae60"/>
            <path d="M6 7V5a2 2 0 0 1 2-2h8" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="8.5" cy="12" r="1.2" fill="#fff"/>
            <circle cx="15.5" cy="12" r="1.2" fill="#fff"/>
          </svg>
        </div>
        <div class="brand-text">
          <span class="name">Bite-N</span><span class="sub">-Goo</span>
        </div>
      </div>

      <nav class="nav" id="nav">
        <ul class="nav-links">
          <li><a href="#home">Home</a></li>
          <li><a href="#why">Why Us</a></li>
          <li><a href="#how">How It Works</a></li>
          <li><a href="vendors.html">Vendors</a></li>
          <li><a href="#plans">Plans</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
        <div class="nav-cta">
          <a class="btn outline" id="loginBtn" href="">Login</a>
          <a class="btn primary"  id="signupBtn" href="">Get Started</a>
        </div>
      </nav>

      <button class="hamburger" id="hamburger" aria-label="menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>

<!-- HERO -->
  <section id="home" class="hero">
    <div class="container hero-grid">
      <div class="hero-text">
        <h1 class="reveal">Fresh, Healthy & Affordable Tiffins ‚Äî Delivered Daily</h1>
        <p class="lead reveal">Homestyle meals made with love, tailored for college students. Subscribe monthly or order day-to-day.</p>
        <div class="hero-ctas reveal">
          <a class="btn primary large" href="#order">Order Now</a>
          <a class="btn outline large" href="#plans">View Plans</a>
        </div>

        <ul class="highlights reveal">
          <li>‚úî Easy monthly plans</li>
          <li>‚úî Multiple vendors to choose</li>
          <li>‚úî Secure UPI & manual payment options</li>
        </ul>
      </div>

      <div class="hero-card reveal">
        <div class="card-preview">
          <img src="https://images.unsplash.com/photo-1604908176861-93e1d9f64fb2?auto=format&fit=crop&w=800&q=60" alt="tiffin sample">
          <div class="card-info">
            <h4>Monthly Veg Plan</h4>
            <p>2 meals/day ‚Ä¢ ‚Çπ500 / month</p>
            <div class="card-cta">
              <a class="btn small primary" href="#order">Pay ‚Çπ500</a>
              <a class="btn small outline" href="#menu">Menu</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- WHY CHOOSE US -->
  <section id="why" class="section why">
    <div class="container">
      <h2 class="section-title reveal">Why students choose Ummed</h2>
      <p class="section-sub">We focus on healthy, timely and budget-friendly meals tailored for campus life.</p>

      <div class="cards-grid">
        <article class="feature-card reveal">
          <div class="icon">üè†</div>
          <h3>Local favorites</h3>
          <p>Satisfy cravings with delivery from neighborhood cooks and home chefs. Reorder go-tos or discover something new.</p>
        </article>

        <article class="feature-card reveal">
          <div class="icon">üöö</div>
          <h3>Delivery to your doorstep</h3>
          <p>Get great food delivered or pre-order for pick up ‚Äî order tracking keeps you in the know.</p>
        </article>

        <article class="feature-card reveal">
          <div class="icon">üíé</div>
          <h3>Exclusive perks</h3>
          <p>Earn perks on referrals and unlock discounts on monthly packs ‚Äî save while you eat.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how" class="section how">
    <div class="container">
      <h2 class="section-title reveal">How it works</h2>
      <div class="steps-grid">
        <div class="step reveal">
          <div class="step-num">1</div>
          <h4>Search</h4>
          <p>Find tiffin services in your area with easy filters.</p>
        </div>
        <div class="step reveal">
          <div class="step-num">2</div>
          <h4>Choose</h4>
          <p>Select a vendor and plan that fits your budget and taste.</p>
        </div>
        <div class="step reveal">
          <div class="step-num">3</div>
          <h4>Pay</h4>
          <p>Pay via UPI deep-link or add payment proof. We support manual and gateway flows.</p>
        </div>
        <div class="step reveal">
          <div class="step-num">4</div>
          <h4>Delivery</h4>
          <p>Get your meal delivered hot at your hostel/room or pick up from vendor.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- PLANS -->
  <section id="plans" class="section plans">
    <div class="container">
      <h2 class="section-title reveal">Our Meal Plans</h2>
      <p class="section-sub reveal">Choose a plan and pay advance. Plans are flexible ‚Äî pause anytime.</p>

      <div class="plans-grid">
        <div class="plan-card reveal">
          <div class="plan-head">Basic</div>
          <div class="plan-price">‚Çπ500 <span>/ month</span></div>
          <ul class="plan-features">
            <li>2 meals / day</li>
            <li>Weekly menu</li>
            <li>Cancel anytime</li>
          </ul>
          <a class="btn primary" href="#order">Pay ‚Çπ500</a>
        </div>

        <div class="plan-card popular reveal">
          <div class="ribbon">Best Value</div>
          <div class="plan-head">Standard</div>
          <div class="plan-price">‚Çπ1000 <span>/ month</span></div>
          <ul class="plan-features">
            <li>3 meals / day</li>
            <li>Snacks included</li>
            <li>Priority delivery</li>
          </ul>
          <a class="btn primary" href="#order">Pay ‚Çπ1000</a>
        </div>

        <div class="plan-card reveal">
          <div class="plan-head">Premium</div>
          <div class="plan-price">‚Çπ2000 <span>/ month</span></div>
          <ul class="plan-features">
            <li>3 meals + snacks</li>
            <li>Custom menu options</li>
            <li>Free delivery</li>
          </ul>
          <a class="btn primary" href="#order">Pay ‚Çπ2000</a>
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section class="section testimonials">
    <div class="container">
      <h2 class="section-title reveal">What students say</h2>
      <div class="testi-grid">
        <blockquote class="testi-card reveal">
          <p>‚ÄúBest tiffin service on campus ‚Äî tasty and on time. Highly recommend!‚Äù</p>
          <footer>‚Äî Riya, 2nd Year</footer>
        </blockquote>
        <blockquote class="testi-card reveal">
          <p>‚ÄúAffordable monthly plan saved my time. Food feels homemade.‚Äù</p>
          <footer>‚Äî Aman, 1st Year</footer>
        </blockquote>
        <blockquote class="testi-card reveal">
          <p>‚ÄúSimple subscription and great customer support. Keep it up!‚Äù</p>
          <footer>‚Äî Priya, 3rd Year</footer>
        </blockquote>
      </div>
    </div>
  </section>

  <!-- CTA BAR -->
  <section class="cta-bar">
    <div class="container cta-inner">
      <div>
        <h3>Ready to order? Start with a ‚Çπ500 monthly plan</h3>
        <p>Secure your meals for the month ‚Äî hassle free.</p>
      </div>
      <div>
        <a class="btn large primary" href="#order">Pay ‚Çπ500</a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer id="contact" class="footer">
    <div class="container footer-grid">
      <div class="footer-col">
        <div class="brand-foot">
          <div class="logo-mark small" aria-hidden="true">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="2" y="7" width="20" height="12" rx="2" fill="#27ae60"/>
              <path d="M6 7V5a2 2 0 0 1 2-2h8" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="foot-name">Ummed <span>Tiffins</span></div>
        </div>

        <p class="foot-text">Fresh, affordable homestyle tiffins delivered to campus. Contact us for vendor partnerships.</p>
        <p class="muted">Phone: +91 98765 43210</p>
      </div>

      <div class="footer-col">
        <h4>Quick Links</h4>
        <ul class="foot-links">
          <li><a href="#why">Why Us</a></li>
          <li><a href="#how">How it works</a></li>
          <li><a href="#plans">Plans</a></li>
          <li><a href="#vendors">Vendors</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>Subscribe</h4>
        <p>Get campus offers and discounts straight to your inbox.</p>
        <form class="foot-subscribe" onsubmit="event.preventDefault(); alert('Subscribed (demo)');">
          <input type="email" placeholder="Your email" required>
          <button class="btn small primary">Subscribe</button>
        </form>

        <div class="payments">
          <img alt="payments" src="https://i.imgur.com/7kQEsHU.png" />
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <small>¬© 2025 Ummed Tiffins ‚Ä¢ Privacy Policy ‚Ä¢ Terms & Conditions</small>
    </div>
  </footer>

  <!-- Small inline script for nav toggle and reveal on scroll -->
  <script>
    // Hamburger toggle
    const hamburger = document.getElementById('hamburger');
    const nav = document.getElementById('nav');
    hamburger.addEventListener('click', () => {
      nav.classList.toggle('open');
      hamburger.classList.toggle('is-active');
    });

    // Simple reveal on scroll
    const reveals = document.querySelectorAll('.reveal');
    const revealOnScroll = () => {
      const windowHeight = window.innerHeight;
      reveals.forEach(el => {
        const top = el.getBoundingClientRect().top;
        if (top < windowHeight - 80) {
          el.classList.add('visible');
        }
      });
    };
    window.addEventListener('scroll', revealOnScroll);
    window.addEventListener('load', revealOnScroll);
  </script>

  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <div class="login-container">
        <div class="login-box">
          <h2>Welcome Back!</h2>
          <p class="subtitle">Login to continue your meals</p>
      
            <button type="button" class="btn-google">
              <img src="https://cdn.iconscout.com/icon/free/png-256/free-google-2981831-2476479.png" alt="Google" />
              Login with Google
            </button>
            <p class="signup-text">Don‚Äôt have an account? <a href="#" id="openSignup">Sign Up</a></p>
        
        </div>
      </div>
    </div>
  </div>

  <!-- Signup Modal -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <div class="signup-container">
        <div class="signup-box">
          <h2>Create Your Account</h2>
          <p class="subtitle">Join us and enjoy healthy meals every day</p>
          <button type="button" class="btn-google">
              <img src="https://cdn.iconscout.com/icon/free/png-256/free-google-2981831-2476479.png" alt="Google" />
              Sign Up with Google
            </button>
            <p class="login-text">Already have an account? <a href="#" id="openLogin">Login</a></p>
         
        </div>
      </div>
    </div>
  </div>

  <!-- Script -->
  <script>
    // Login Modal
    const loginModal = document.getElementById("loginModal");
    const loginBtn = document.getElementById("loginBtn");
    const signupLinkFromLogin = document.getElementById("openSignup");

    // Signup Modal
    const signupModal = document.getElementById("signupModal");
    const signupBtn = document.getElementById("signupBtn");
    const loginLinkFromSignup = document.getElementById("openLogin");

    // Close buttons
    const closeBtns = document.querySelectorAll(".close-btn");

    // Open login
    loginBtn.onclick = (e) => { e.preventDefault(); loginModal.style.display = "block"; }

    // Open signup
    signupBtn.onclick = (e) => { e.preventDefault(); signupModal.style.display = "block"; }

    // Switch to signup from login
    signupLinkFromLogin.onclick = (e) => {
      e.preventDefault();
      loginModal.style.display = "none";
      signupModal.style.display = "block";
    }

    // Switch to login from signup
    loginLinkFromSignup.onclick = (e) => {
      e.preventDefault();
      signupModal.style.display = "none";
      loginModal.style.display = "block";
    }

    // Close modal
    closeBtns.forEach(btn => {
      btn.onclick = () => {
        loginModal.style.display = "none";
        signupModal.style.display = "none";
      }
    });

    // Close when clicking outside
    window.onclick = (e) => {
      if (e.target == loginModal) loginModal.style.display = "none";
      if (e.target == signupModal) signupModal.style.display = "none";
    }
  </script>

  <!-- <script type="module">
  // Firebase SDKs import
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyDh5N6JTHYU0qjodJNUF7Yo76G5tt8AcX0",
    authDomain: "bite-n-go.firebaseapp.com",
    projectId: "bite-n-go",
    storageBucket: "bite-n-go.firebasestorage.app",
    messagingSenderId: "892092521856",
    appId: "1:892092521856:web:1adb53b64a08d1270b7565",
    measurementId: "G-EF3ZM1CZFW"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();

  // Google Auth Function
  async function handleGoogleAuth() {
    try {
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      console.log("User signed in:", user);
      alert(`Welcome ${user.displayName}`);

      // Close modals after sign in
      document.getElementById("loginModal").style.display = "none";
      document.getElementById("signupModal").style.display = "none";

      // Redirect after login/signup
      window.location.href = "vendor.html";
    } catch (error) {
      console.error("Auth error:", error);
      alert(error.message);
    }
  }

  // Attach click handler to ALL Google buttons
  document.querySelectorAll(".btn-google").forEach((btn) => {
    btn.addEventListener("click", (e) => {
      e.preventDefault();
      handleGoogleAuth();
    });
  });
</script> -->

 <script type="module">
  // -----------------------
  // Firebase SDKs import
  // -----------------------
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";
  import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

  // -----------------------
  // Firebase Config
  // -----------------------
  const firebaseConfig = {
    apiKey: "AIzaSyDh5N6JTHYU0qjodJNUF7Yo76G5tt8AcX0",
    authDomain: "bite-n-go.firebaseapp.com",
    projectId: "bite-n-go",
    storageBucket: "bite-n-go.firebasestorage.app",
    messagingSenderId: "892092521856",
    appId: "1:892092521856:web:1adb53b64a08d1270b7565",
    measurementId: "G-EF3ZM1CZFW"
  };

  // -----------------------
  // Initialize Firebase
  // -----------------------
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();
  const db = getFirestore(app);

  // -----------------------
  // Google Auth Function
  // -----------------------
  async function handleGoogleAuth() {
    try {
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      console.log("User signed in:", user);

      const email = user.email;

      // Check Firestore orders collection for this user
      const ordersRef = collection(db, "orders");
      const q = query(ordersRef, where("email", "==", email));
      const querySnapshot = await getDocs(q);

      // --- CASE 1: No order found ---
      if (querySnapshot.empty) {
        // ‚úÖ User signed up for first time
        alert(`Welcome ${user.displayName}! Please place your first order.`);
        document.getElementById("loginModal").style.display = "none";
        document.getElementById("signupModal").style.display = "none";
        window.location.href = "vendor.html";
        return;
      }

      // --- CASE 2: Order exists ---
      const orderData = querySnapshot.docs[0].data();

      // If already signed up before (i.e. has an order)
      if (orderData) {
        // Check isPaid status
        if (orderData.isPaid === true) {
          // ‚úÖ Already paid ‚Üí redirect to dashboard
          alert(`Welcome back ${user.displayName}! Redirecting to your dashboard.`);
          document.getElementById("loginModal").style.display = "none";
          document.getElementById("signupModal").style.display = "none";
          window.location.href = "dashbordd.html";
        } else {
          // ‚ùå Not paid yet ‚Üí redirect to vendor page
          alert(`Hi ${user.displayName}, please complete your payment to continue.`);
          document.getElementById("loginModal").style.display = "none";
          document.getElementById("signupModal").style.display = "none";
          window.location.href = "vendor.html";
        }
      }

    } catch (error) {
      // -----------------------
      // Error Handling
      // -----------------------
      console.error("Auth error:", error);
      if (error.code === "auth/popup-closed-by-user") {
        alert("Popup closed before signing in. Please try again.");
      } else if (error.code === "auth/account-exists-with-different-credential") {
        alert("This account is already signed up! Please use the Login button.");
        // Optional: open login modal automatically
        if (document.getElementById("signupModal"))
          document.getElementById("signupModal").style.display = "none";
        if (document.getElementById("loginModal"))
          document.getElementById("loginModal").style.display = "block";
      } else {
        alert(error.message);
      }
    }
  }

  // -----------------------
  // Attach click handler to ALL Google buttons
  // -----------------------
  document.querySelectorAll(".btn-google").forEach((btn) => {
    btn.addEventListener("click", (e) => {
      e.preventDefault();
      handleGoogleAuth();
    });
  });
</script> 
</body>
</html>