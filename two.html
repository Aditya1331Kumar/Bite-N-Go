<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Raj Catering — Vendor Details</title>
  <link rel="stylesheet" href="waiting/two.css">
</head>
<body>

  <!-- MAIN PAGE -->
  <main class="page">
    <!-- Title & Quote -->
    <section class="hero">
      <h1 class="vendor-title">Raj Catering</h1>
      <p class="vendor-quote">“Good food is the foundation of genuine happiness.”</p>

      <!-- Menu image -->
      <div class="menu-wrap" aria-hidden="false">
        <img id="menuImage" src="images/two.jpg" alt="Raj Catering Menu" />
      </div>

      <!-- Feature boxes -->
      <div class="features" aria-label="Features">
        <div class="feature-card" data-feature="veg">
          <div class="feat-emoji">🌱</div>
          <div class="feat-title">Pure Veg</div>
          <p class="feat-desc">Fresh homestyle vegetarian meals prepared daily.</p>
        </div>

        <div class="feature-card" data-feature="meals">
          <div class="feat-emoji">🍽️</div>
          <div class="feat-title">2 Meals / Day</div>
          <p class="feat-desc">Morning & evening meals included in monthly packs.</p>
        </div>

        <div class="feature-card" data-feature="price">
          <div class="feat-emoji">💰</div>
          <div class="feat-title">₹500 / Month</div>
          <p class="feat-desc">Budget-friendly plan for students.</p>
        </div>

        <div class="feature-card" data-feature="students">
          <div class="feat-emoji">👥</div>
          <div class="feat-title">120+ Students</div>
          <p class="feat-desc">Trusted by campus residents and hostelers.</p>
        </div>

        <div class="feature-card" data-feature="fresh">
          <div class="feat-emoji">🔥</div>
          <div class="feat-title">Fresh Daily</div>
          <p class="feat-desc">Cooked & packed fresh every day for same-day delivery.</p>
        </div>
      </div>
    </section>

    <!-- Reviews -->
    <section class="reviews">
      <h2 class="reviews-heading">What students say</h2>
      <div class="reviews-grid">
        <!-- 7 review cards -->
        <article class="review">
          <div class="review-top">
            <div class="avatar">R</div>
            <div class="meta">
              <div class="name">Riya</div>
              <div class="stars">★★★★★</div>
            </div>
            <time class="date">Sep 12, 2025</time>
          </div>
          <p class="review-text">Amazing taste and timely delivery. Highly recommend!</p>
          <div class="review-actions">
            <button class="helpful">Helpful</button>
            <button class="report">Report</button>
          </div>
        </article>

        <article class="review">
          <div class="review-top">
            <div class="avatar">A</div>
            <div class="meta">
              <div class="name">Aman</div>
              <div class="stars">★★★★☆</div>
            </div>
            <time class="date">Aug 29, 2025</time>
          </div>
          <p class="review-text">Affordable and filling meals, perfect for students.</p>
          <div class="review-actions">
            <button class="helpful">Helpful</button>
            <button class="report">Report</button>
          </div>
        </article>

        <article class="review">
          <div class="review-top">
            <div class="avatar">P</div>
            <div class="meta">
              <div class="name">Priya</div>
              <div class="stars">★★★★★</div>
            </div>
            <time class="date">Aug 10, 2025</time>
          </div>
          <p class="review-text">Friendly staff and hygienic packaging.</p>
          <div class="review-actions">
            <button class="helpful">Helpful</button>
            <button class="report">Report</button>
          </div>
        </article>

        <article class="review">
          <div class="review-top">
            <div class="avatar">K</div>
            <div class="meta">
              <div class="name">Karan</div>
              <div class="stars">★★★★☆</div>
            </div>
            <time class="date">Jul 22, 2025</time>
          </div>
          <p class="review-text">Menu changes often, never gets boring.</p>
          <div class="review-actions">
            <button class="helpful">Helpful</button>
            <button class="report">Report</button>
          </div>
        </article>

        <article class="review">
          <div class="review-top">
            <div class="avatar">M</div>
            <div class="meta">
              <div class="name">Meera</div>
              <div class="stars">★★★★☆</div>
            </div>
            <time class="date">Jul 05, 2025</time>
          </div>
          <p class="review-text">Great portion sizes for the price.</p>
          <div class="review-actions">
            <button class="helpful">Helpful</button>
            <button class="report">Report</button>
          </div>
        </article>

        <article class="review">
          <div class="review-top">
            <div class="avatar">S</div>
            <div class="meta">
              <div class="name">Sandeep</div>
              <div class="stars">★★★★★</div>
            </div>
            <time class="date">Jun 26, 2025</time>
          </div>
          <p class="review-text">Customer support resolved my issue quickly.</p>
          <div class="review-actions">
            <button class="helpful">Helpful</button>
            <button class="report">Report</button>
          </div>
        </article>

        <article class="review">
          <div class="review-top">
            <div class="avatar">A</div>
            <div class="meta">
              <div class="name">Anjali</div>
              <div class="stars">★★★★★</div>
            </div>
            <time class="date">Jun 11, 2025</time>
          </div>
          <p class="review-text">I love the snacks they include sometimes!</p>
          <div class="review-actions">
            <button class="helpful">Helpful</button>
            <button class="report">Report</button>
          </div>
        </article>
      </div>
    </section>

    <!-- Buy CTA -->
    <section class="cta">
      <button ><a href="form 2.html">Buy Now</a></button>
    </section>
  </main>

  <!-- small toasts -->
  <div id="toastWrap" aria-live="polite" class="toast-wrap"></div>

  <!-- SCRIPT: modal, form handling (client-only), localStorage save, animations -->
  <script>
    // UI elements
    const btnBuy = document.getElementById('btnBuyNow');
    const modal = document.getElementById('orderModal');
    const modalClose = document.getElementById('modalClose');
    const cancelBtn = document.getElementById('cancelBtn');
    const orderForm = document.getElementById('orderForm');
    const toastWrap = document.getElementById('toastWrap');

    // Open modal
    btnBuy.addEventListener('click', () => {
      openModal();
    });

    function openModal() {
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden','false');
      // focus first field
      setTimeout(()=> document.getElementById('name').focus(), 120);
    }

    function closeModal() {
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden','true');
    }

    modalClose.addEventListener('click', closeModal);
    cancelBtn.addEventListener('click', (e) => { e.preventDefault(); closeModal(); });

    // click outside to close
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });

    // ESC to close
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal.style.display === 'flex') closeModal();
    });

    // tiny toast helper
    function toast(msg, err=false, ttl=3500) {
      const el = document.createElement('div');
      el.className = 'toast' + (err ? ' err' : ' ok');
      el.textContent = msg;
      toastWrap.appendChild(el);
      setTimeout(()=> el.style.opacity = '0', ttl - 300);
      setTimeout(()=> el.remove(), ttl);
    }

    // Form submit handling:
    orderForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      const address = document.getElementById('address').value.trim();
      const ref = document.getElementById('ref').value.trim();
      const email = document.getElementById('email').value.trim();
      const paidChecked = document.getElementById('paidCheck').checked;
      const screenshotInput = document.getElementById('screenshot');

      if (!name || !address || !email) {
        toast('Please fill the required fields', true); return;
      }

      toast('Preparing your order...');

      // Read screenshot as base64 (client-only mock upload)
      let screenshotData = null;
      if (screenshotInput.files && screenshotInput.files[0]) {
        const file = screenshotInput.files[0];
        try {
          screenshotData = await readFileAsDataURL(file);
        } catch (err) {
          console.error('file read error', err);
        }
      }

      // Save to localStorage (client-only). In real app you'd send to server / DB.
      const orders = JSON.parse(localStorage.getItem('raj_orders_v1') || '[]');
      const order = {
        id: 'ord_' + Date.now(),
        name, address, ref, email,
        screenshotData,
        paymentClaim: paidChecked,
        isPaid: false, // admin will set true when verified
        vendor: 'Raj Catering',
        createdAt: new Date().toISOString()
      };
      orders.push(order);
      localStorage.setItem('raj_orders_v1', JSON.stringify(orders));

      toast('Order saved locally. Redirecting to waiting page...', false, 1600);

      closeModal();

      setTimeout(() => {
        // redirect to waiting page (create waiting.html or change)
        window.location.href = 'waiting.html';
      }, 900);
    });

    function readFileAsDataURL(file) {
      return new Promise((res, rej) => {
        const reader = new FileReader();
        reader.onload = () => res(reader.result);
        reader.onerror = () => rej(new Error('Failed to read file'));
        reader.readAsDataURL(file);
      });
    }

    // Small interactive UX for feature cards
    document.querySelectorAll('.feature-card').forEach(card => {
      card.addEventListener('mouseenter', () => {
        card.classList.add('hovered');
      });
      card.addEventListener('mouseleave', () => {
        card.classList.remove('hovered');
      });
    });

    // Reviews helpful/report buttons
    document.querySelectorAll('.review .helpful').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.target.textContent = 'Thanks ✓';
        e.target.disabled = true;
      });
    });
    document.querySelectorAll('.review .report').forEach(btn => {
      btn.addEventListener('click', (e) => {
        toast('Report submitted. We will review this.', true);
        e.target.disabled = true;
      });
    });

    // Make sure images exist - if menu.png or background.png missing, show console warning
    document.getElementById('menuImage').addEventListener('error', () => {
      console.warn('menu.png not found; please place menu.png in same folder.');
    });

    // END script
  </script>
</body>
</html>
